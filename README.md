<p align="center">
  <a href="" rel="noopener">
 <img width=200px height=200px src="./logo.png" alt="Project logo"></a>
</p>

<h3 align="center">Alsat IPG Android Kotlin Example</h3>

<div align="center">

[![Status](https://img.shields.io/badge/status-active-success.svg)]()
[![GitHub Issues](https://img.shields.io/github/issues/AlsatPardakht/AlsatIPGAndroidKotlinExample.svg)](https://github.com/AlsatPardakht/AlsatIPGAndroidKotlinExample/issues)
[![GitHub Pull Requests](https://img.shields.io/github/issues-pr/AlsatPardakht/AlsatIPGAndroidKotlinExample.svg)](https://github.com/AlsatPardakht/AlsatIPGAndroidKotlinExample/pulls)
[![License](https://img.shields.io/badge/license-MIT-blue.svg)](/LICENSE)

</div>

---

<div dir="rtl">

<p align="center">
ฺฉ ูุซุงู ุณุงุฏู ุงุฒ ูุญูู ุงุณุชูุงุฏู ฺฉุฑุฏู ฺฉุชุงุจุฎุงูู <a href="https://github.com/AlsatPardakht/AlsatIPGAndroid">AlsatIPGAndroid</a> ุฏุฑ ุงูพูฺฉุดู ุจุง ุฒุจุงู ุจุฑูุงูู ููุณ Kotlin
    <br> 
</p>



## ๐ ููุฑุณุช

- [ุฏุฑุจุงุฑู](#about)
- [ูุญูู ุงุณุชูุงุฏู](#usage)
- [ุณุงุฎุชู ุดุฏู ุจุง ุงุณุชูุงุฏู ุงุฒ](#built_using)
- [ููุณูุฏฺฏุงู](#authors)

## ๐ง ุฏุฑุจุงุฑู <a name = "about"></a>
<p dir="rtl">
ุฏุฑ ุงู ุงูพูฺฉุดู ุงุฒ ฺฉุชุงุจุฎุงูู <a href="https://github.com/AlsatPardakht/AlsatIPGAndroid">AlsatIPGAndroid</a> ุจุฑุง ูพุฑุฏุงุฎุช ุตูุฑุช ุญุณุงุจ ุจู ุตูุฑุช ุงูุชุฑูุช ุงุณุชูุงุฏู ุดุฏู ุงุณุช ฺฉู ุจุง ุฏู ุฑูุด ูพุงุฏู ุณุงุฒ ุงูุชุฑูุณ ุง callback  ูุงุจู ูพุงุฏู ุณุงุฒ ุงุณุช . 
<br>
ุจุฑุง ูุทุงูุนู ุจุดุชุฑ ุฏุฑ ููุฑุฏ api ูุณุชูู IPG ุขู ุณุงุช ูพุฑุฏุงุฎุช ู ุชูุงูุฏ ุจู ููฺฉ ุฒุฑ ูุฑุงุฌุนู ฺฉูุฏ :
</p>
<a href="https://www.alsatpardakht.com/TechnicalDocumentation/191">๐ ูุณุชูุฏุงุช ูู IPG ูุง ูุณุชูู ุขู ุณุงุช ูพุฑุฏุงุฎุช</a><br>
ููฺูู ูุดุงุจู ุงู ุงูพูฺฉุดู ุจุง ุงุณุชูุงุฏู ุงุฒ ุฒุจุงู ุจุฑูุงูู ููุณ ุฌุงูุง ููุฌูุฏ ุงุณุช ฺฉู ู ุชูุงูุฏ ุฏุฑ ููฺฉ ุฒุฑ ูุดุงูุฏู ฺฉูุฏ :
<br>
<a href="https://github.com/AlsatPardakht/AlsatIPGAndroidJavaExample">ููููู ุงุณุชูุงุฏู ุงุฒ ุงู ฺฉุชุงุจุฎุงูู ุฏุฑ Java</a>

## ๐ ูุญูู ุงุณุชูุงุฏู <a name="usage"></a>
ูพุณ ุงุฒ ุงู ฺฉู ูุฑุงุญู <a href="https://github.com/AlsatPardakht/AlsatIPGAndroid#-%D8%B4%D8%B1%D9%88%D8%B9-%D8%A8%D9%87-%DA%A9%D8%A7%D8%B1-">ุดุฑูุน ุจู ฺฉุงุฑ</a> ฺฉุชุงุจุฎุงูู 
<a href="https://github.com/AlsatPardakht/AlsatIPGAndroid">AlsatIPGAndroid</a>
 ุฑุง ุงูุฌุงู ุฏุงุฏุฏ ู ุชูุงูุฏ ูุฑุงุญู ุงุณุชูุงุฏู ุงุฒ ฺฉุชุงุจุฎุงูู ฺฉู ุฏุฑ ุงุฏุงูู ุขูุฑุฏู ุดุฏู ุฑุง ุงูุฌุงู ุจุฏูุฏ .
<br><br>
### ูุฑุญูู ุงูู : ุชุนุฑู ุขุฏุฑุณ ุจุงุฒฺฏุดุช ุจู ุงฺฉุชูุช (<a href="https://developer.android.com/training/app-links/deep-linking">deep link</a>)

ุงุจุชุฏุง ุจุงุฏ ฺฉ Redirect Address ุจุฑุง ุงฺฉุชูุช ุฎูุฏ ุชุนุฑู ฺฉูุฏ ฺฉู ุงฺฉุชูุช ุดูุง ุจุชูุงูุฏ ูุชุฌู ูพุฑุฏุงุฎุช ุฑุง ุฏุฑุงูุช ู ุจุฑุณ ฺฉูุฏ ( payment validation )
<br>ุจุฑุง ุงู ฺฉุงุฑ ฺฉุงู ุงุณุช ุชฺฏ intent-filter ุฒุฑ ุฑุง ุฏุฑ ุงฺฉุชูุช ุฏูุฎูุงู ุฎูุฏ ฺฉูพ ฺฉูุฏ .
<br> 
ุจุฑุง ูุดุฎุต ฺฉุฑุฏู Redirect Address ุฏูุฎูุงู ุฎูุฏ ฺฉุงู ุงุณุช ุฏุฑ ุชฺฏ data ููุฏุงุฑ ูุง host ู scheme ู pathPrefix ุฏูุฎูุงู ุฎูุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ
<br>
ุฏุฑ ูุซุงู ุฒุฑ Redirect Address ุจุฑุงุจุฑ ุงุณุช ุจุง : http://www.example.com/some_path

</div>

```XML
<manifest>

    ...

    <application>
        <activity
            android:name=".MainActivityFirstWay"
            android:exported="true"
            android:launchMode="singleTask">
            
            ...

            <intent-filter android:label="YOUR LABEL">
                <action android:name="android.intent.action.VIEW" />
                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.BROWSABLE" />
                <data
                    android:host="www.example.com"
                    android:pathPrefix="/some_path"
                    android:scheme="http" />
            </intent-filter>
        </activity>
    </application>
</manifest>
```

<div dir="rtl">
ููฺูู ุฏูุช ฺฉูุฏ ฺฉู ุฏุฑ ุงฺฉุชูุช ููุฑุฏ ูุธุฑ ุญุชูุง ููุฏุงุฑ  ุงุชุฑุจูุช ูุง ุฒุฑ ููุฌูุฏ ุจุงุดุฏ ฺฉู ุฏุฑ ุฒูุงู ุจุงุฒฺฏุดุช ุจู ุงูพูฺฉุดู ูพุณ ุงุฒ ูพุฑุฏุงุฎุช ุงูุชุฑูุช ุจู ูุดฺฉู ูุฎูุฑุฏ :

</div>

```XML
android:exported="true"
android:launchMode="singleTask"
```

<div dir="rtl">
ุจุฑุง ุขุดูุง ุจุดุชุฑ ุจุง ุขุฏุฑุณ ูุง ุจุงุฒฺฏุดุช ุจู ุงฺฉุชูุช ู ุชูุงูุฏ ุฏุงฺฉูููุช 
<a href="https://developer.android.com/training/app-links/deep-linking">deep link</a>   ุฑุง ูุทุงูุนู ฺฉูุฏ .

<br>

### ูุฑุญูู ุฏูู : ูพุงุฏู ุณุงุฒ ุงูุชุฑูุณ ูุง
ุฏุฑ ุงู ูุฑุญูู ฺฉุงู ุงุณุช ุงฺฉุชูุช ุง ูุฑฺฏููุช ( ุง view model ู ุง ูุฑ ฺฉูุงุณ ุฏูุฎูุงู ุฏฺฏุฑ ) ุดูุง ุงุฒ ุงูุชุฑูุณ ูุง PaymentSignCallback ู PaymentValidationCallback ุฑุง ูพุงุฏู ุณุงุฒ ฺฉูุฏ ฺฉู ูุฑ ฺฉ ุฏุงุฑุง ฺฉ ุชุงุจุน ุงุณุช ฺฉู ุจุงุฏ ูพุงุฏู ุณุงุฒ ุดูุฏ :

</div>

```Kotlin
class MainActivityFirstWay : AppCompatActivity(), PaymentSignCallback, PaymentValidationCallback {

    override fun onPaymentSignResult(paymentSignResult: PaymentSignResult) {

        ...

    }

    override fun onPaymentValidationResult(paymentValidationResult: PaymentValidationResult) {

        ...

    }

}

```

<div dir="rtl">
ุงู ุฏู ุชุงุจุน ูุชุฌู sign ุดุฏู ูพุฑุฏุงุฎุช ู validation ูพุฑุฏุงุฎุช ุฑุง ุจู ุดูุง ุจุฑ ู ฺฏุฑุฏุงูุฏ .
<br><br>

### ูุฑุญูู ุณูู : ุณุงุฎุชู ููููู ุงุฒ ฺฉูุงุณ AlsatIPG

ุจุง ุงุณุชูุงุฏู ุงุฒ ุฏุณุชูุฑ ุฒุฑ ู ุชูุงูุฏ ฺฉ ููููู ุงุฒ ฺฉูุงุณ AlsatIPG ุจุณุงุฒุฏ ู ุจุง ฺฉูฺฉ ุงู ููููู ฺฉุงุฑ ูุง ูพุฑุฏุงุฎุช ุฑุง ุงูุฌุงู ุฏูุฏ :
</div>

```Kotlin
  private val alsatIPG = AlsatIPG.getInstance(this, this)
```

<div dir="rtl">
<br>

### ูุฑุญูู ฺูุงุฑู : sign ฺฉุฑุฏู ูพุฑุฏุงุฎุช
ุจุฑุง ุดุฑูุน sign ูพุฑุฏุงุฎุช ฺฉุงู ุงุณุช ฺฉ ููููู ุงุฒ PaymentSignRequest ุจุณุงุฒุฏ ู ุจุง ฺฉูฺฉ ุชุงุจุน sign ููุฌูุฏ ุฏุฑ ฺฉุชุงุจุฎุงูู ูพุฑุฏุงุฎุช ุฑุง ุงูุฌุงู ุฏูุฏ :
</div>

```Kotlin
  val paymentSignRequest = PaymentSignRequest(
      Api = API,
      Amount = "10000",
      InvoiceNumber = "12345",
      RedirectAddress = "http://www.example.com/some_path"
  )
  alsatIPG.sign(paymentSignRequest)
```

<div dir="rtl">

- ููุฏุงุฑ API ููุงู ฺฉูุฏ ุฏุฑุงูุช ุดูุง ุฏุฑ ูุจ ุณุงุช ุขู ุณุงุช ูพุฑุฏุงุฎุช ู ุจุงุดุฏ ฺฉู ุจุฑุง ุฏุฑุงูุช ุขู ุงุจุชุฏุง ุจุงุฏ ุฏุฑ ูุจ ุณุงุช ุซุจุช ูุงู ฺฉูุฏ ู ูพุณ ุงุฒ ูุฑุงุญู ุงุญุฑุงุฒ ููุช ุงู ฺฉูุฏ ุจู ุดูุง ุฏุงุฏู ู ุดูุฏ .

- ููุฏุงุฑ Amount ููุงู ูุจูุบ ูุงูุจ ูพุฑุฏุงุฎุช ุจู ุฑุงู ุงุณุช . 

- ููุฏุงุฑ InvoiceNumber ููุงู ุดูุงุฑู ุณูุงุฑุด ุดูุง ุงุณุช .

- ููุฏุงุฑ RedirectAddress ููุงู ุขุฏุฑุณ ุจุงุฒฺฏุดุช ุจู ุงูพูฺฉุดู ุดูุงุณุช ฺฉู ุฏุฑ ูุงู AndroidManifest.xml ูุงุฑุฏ ฺฉุฑุฏุฏ .

ูพุณ ุงุฒ ูุฑุงุฎูุงู ุชุงุจุน sign ูุชุงุฌ ุงู ูุฑุงุฎูุงู ุงุฒ ุทุฑู ุชุงุจุน 
onPaymentSignResult ฺฉู ูพุงุฏู ุณุงุฒ ฺฉุฑุฏู ุจูุฏุฏ ุฏุฑ ุฏุณุชุฑุณ ุงุณุช :

</div>

```Kotlin
override fun onPaymentSignResult(paymentSignResult: PaymentSignResult) {
    when {
        paymentSignResult.isSuccessful -> {
            log("payment Sign Success url = ${paymentSignResult.url}")
            val intent = Intent(Intent.ACTION_VIEW, Uri.parse(paymentSignResult.url))
            startActivity(intent)
        }
        paymentSignResult.isLoading -> {
            log("payment Sign Loading ...")
        }
        else -> {
            log("payment Sign error = ${paymentSignResult.errorMessage}")
        }
    }
}
```

<div dir="rtl">

ุงู ุชุงุจุน ูุถุนุช ูุง ูููู ุจูุฏู ุง ููุฏูฺฏ ุง ุงุฑูุฑ ุชุงุจุน sign ุฑุง ุจู ุดูุง ุชุญูู ู ุฏูุฏ .
<br>
ุฏูุช ฺฉูุฏ ุฏุฑ ุฒูุงู ูููู ุจูุฏู sign ูพุฑุฏุงุฎุช ุดูุง ุจุงุฏ ุจุง ุงุณุชูุงุฏู ุงุฒ url ููุฌูุฏ ุฏุฑ ูุชุฌู ฺฉ ุตูุญู ูุจ ุจุฑุง ูุฏุงุช ุดุฏู ฺฉุงุฑุจุฑ ุจู ุตูุญู ูพุฑุฏุงุฎุช ุดุงูพุฑฺฉ ุจุงุฒ ฺฉูุฏ
<br>
ุจุฑุง ุจุงุฒ ฺฉุฑุฏู ุตูุญู ูุจ ู ุชูุงูุฏ ุงุฒ ูุฑูุฑฺฏุฑ ูุจ ุง WebView ุงุณุชูุงุฏู ฺฉูุฏ ฺฉู ุฏุฑ ุงู ูพุฑูฺู ุจุฑุง ุณุงุฏฺฏ ุงุฒ ุฑูุด ูุฑูุฑฺฏุฑ ูุจ ุงุณุชูุงุฏู ุดุฏู ุงุณุช .
<br><br>

### ูุฑุญูู ูพูุฌู : validation ฺฉุฑุฏู ูพุฑุฏุงุฎุช

ุจุฑุง ุงู ฺฉู ุจุชูุงูุฏ ุจุฑุง ูพุฑุฏุงุฎุช validation ุงูุฌุงู ุจุฏูุฏ ฺฉุงู ุงุณุช ุชุงุจุน validation ุฑุง ุฏุฑ onNewIntent ุงฺฉุชูุช ูุฑุงุฎูุงู ฺฉูุฏ :

</div>

```Kotlin
override fun onNewIntent(intent: Intent?) {
    super.onNewIntent(intent)
    intent?.data?.let { data ->
        log("intent and Uri is not null")
        alsatIPG.validation(API, data)
    } ?: log("intent or Uri is null")
}
```

<div dir="rtl">

- ููุฏุงุฑ API ููุงู ฺฉูุฏ ุฏุฑุงูุช ุดูุง ุฏุฑ ูุจ ุณุงุช ุขู ุณุงุช ูพุฑุฏุงุฎุช ู ุจุงุดุฏ .

- ููุฏุงุฑ intent.data ููุงู ุงุทูุงุนุงุช ูุณุชูุฏ ฺฉู ุงุฒ ุณูุช ุดุงูพุฑฺฉ ุจู ุงฺฉุชูุช ุดูุง ุจุงุฒฺฏุดุช ุฏุงุฏู ู ุดูุฏ ู ุชุงุจุน validation ุจุง  ุงุณุชูุงุฏู ุงุฒ ุงู ุงุทูุงุนุงุช ูุนุชุจุฑ ุจูุฏู ูพุฑุฏุงุฎุช ุฑุง ุจุฑุณ ู ฺฉูุฏ .

<br>
ูพุณ ุงุฒ ุขู ฺฉู ฺฉุงุฑุจุฑ ูพุฑุฏุงุฎุช ุฑุง ุจู ุฏุฑุณุช ุงูุฌุงู ุฏุงุฏ ุง ุจู ูุฑ ุฏูู ูููู ุจู ูพุฑุฏุงุฎุช ูุดุฏ ุดุงูพุฑฺฉ ฺฉุงุฑุจุฑ ุฑุง ุจู ุขุฏุฑุณ RedirectAddress ฺฉู ุฏุฑ PaymentSignRequest ูุงุฑุฏ ฺฉุฑุฏู ุจูุฏุจุฏ ูุฏุงุช ู ฺฉูุฏ ฺฉู ุจุงุนุซ ูุฑุงุฎูุงู ุดุฏู ุชุงุจุน onNewIntent ุงฺฉุชูุช ุดูุง ู ูุฑุงุฎูุงู ุดุฏู ุชุงุจุน validation ู ุดูุฏ .
<br>
ูพุณ ุงุฒ ูุฑุงุฎูุงู ุชุงุจุน validation ูุชุงุฌ ุงู ูุฑุงุฎูุงู ุงุฒ ุทุฑู ุชุงุจุน onPaymentValidationResult ฺฉู ูพุงุฏู ุณุงุฒ ฺฉุฑุฏู ุจูุฏุฏ ุฏุฑ ุฏุณุชุฑุณ ุงุณุช :
</div>

```Ktolin
override fun onPaymentValidationResult(paymentValidationResult: PaymentValidationResult) {
    when {
        paymentValidationResult.isSuccessful -> {
            log("payment Validation Success data = ${paymentValidationResult.data}")
            if (
                (paymentValidationResult.data?.PSP?.IsSuccess == true) &&
                (paymentValidationResult.data?.VERIFY?.IsSuccess == true)
            ) {
                log("money transferred")
            } else {
                log("money has not been transferred")
            }
        }
        paymentValidationResult.isLoading -> {
            log("payment Validation Loading ...")
        }
        else -> {
            log("payment Validation error = ${paymentValidationResult.errorMessage}")
        }
    }
}
```

<div dir="rtl">

ุงู ุชุงุจุน ูุถุนุช ูุง ูููู ุจูุฏู ุง ููุฏูฺฏ ุง ุงุฑูุฑ ุชุงุจุน validation ุฑุง ุจู ุดูุง ุชุญูู ู ุฏูุฏ .
<br>
ููฺูู ุฏุฑ ุฒูุงู ฺฉู ูพุฑุฏุงุฎุช ูููู ุจูุฏู ููุฏ data ููุฌูุฏ ุฏุฑ ูุชุฌู ุงุทูุงุนุงุช ุฏุฑ ููุฑุฏ ูพุฑุฏุงุฎุช ุฑุง ุจู ุดูุง ู ุฏูุฏ ฺฉู ู ุชูุงูุฏ ุงุฒ ุขู ุงุณุชูุงุฏู ฺฉูุฏ .

<br>

### โ๏ธ ุชูุฌู 1 :
ุฏูุช ฺฉูุฏ ฺฉู ูููู ุจูุฏู ูุชุฌู ุชุงุจุน validation ุจู ุงู ูุนู ูุณุช ฺฉู ูพูู ุงุฒ ุญุณุงุจ ฺฉุงุฑุจุฑ ุจู ุญุณุงุจ ุดูุง ุงูุชูุงู ุงูุชู ! ุจุฑุง ฺฉุงููุง ูุทูุฆู ุดุฏู ุงุฒ ุงูุชูุงู ูพูู ุญุชูุง ุงุฒ ุฏุณุชูุฑ ุฒุฑ ุจุฑุง ุจุฑุณ ุงุณุชูุงุฏู ฺฉูุฏ

</div>

```Kotlin
if (
    (paymentValidationResult.data?.PSP?.IsSuccess == true) &&
    (paymentValidationResult.data?.VERIFY?.IsSuccess == true)
) {
    log("money transferred")
} else {
    log("money has not been transferred")
}
```

<div dir="rtl">

ุงุทูุงุนุงุช ููุฌูุฏ ุฏุฑ ููุฏ data ุดุงูู :
- ูุจูุบ ูพุฑุฏุงุฎุช ุจู ุฑุงู ( PSP.Amount )
- ุชุงุฑุฎ ูุงฺฉุชูุฑ ( PSP.InvoiceDate )
- ุดูุงุฑู ูุงฺฉุชูุฑ ( PSP.InvoiceNumber )
- ููููุช ูพุฑุฏุงุฎุช ุฏุฑ ุณูุช ุจุงูฺฉ ( PSP.IsSuccess )
- ฺฉุฏ ุจุงุฒุฑฺฏุงู ( PSP.MerchantCode )
- ูพุงู ุณูุช ุจุงูฺฉ ( PSP.Message )
- ุดูุงุฑู ูุฑุฌุน ( PSP.ReferenceNumber )
- ฺฉุฏ ุชุฑููุงู ( PSP.TerminalCode )
- ุดูุงุฑู ุฑุฏุงุจ ( PSP.TraceNumber )
- ุชุงุฑุฎ ูุนุงููู ( PSP.TransactionDate )
- ุดูุงุณู ูุฑุฌุน ุชุฑุงฺฉูุด ( PSP.TransactionReferenceID )
- ุดูุงุฑู ฺฉุงุฑุช ูุด ุดุฏู ูพุฑุฏุงุฎุช ฺฉููุฏู ( PSP.TrxHashedCardNumber )
- ุดูุงุฑู ฺฉุงุฑุช ูุงุณฺฉ ูพุฑุฏุงุฎุช ฺฉููุฏู ( PSP.TrxMaskedCardNumber )
- ุดูุงุฑู ฺฉุงุฑุช ูุด ุดุฏู ูพุฑุฏุงุฎุช ฺฉููุฏู ( VERIFY.HashedCardNumber )
- ููููุช ุงูุฌุงู ุนููุงุช ูพุฑุฏุงุฎุช ( VERIFY.IsSuccess )
- ุดูุงุฑู ฺฉุงุฑุช ูุงุณฺฉ ูพุฑุฏุงุฎุช ฺฉููุฏู ( VERIFY.MaskedCardNumber )
- ูพุงู ุนููุงุช ูพุฑุฏุงุฎุช ( VERIFY.Message )
- ุดูุงุฑู ูุฑุฌุน ุดุงูพุฑฺฉ ( VERIFY.ShaparakRefNumber )

### โ๏ธ ุชูุฌู ฒ :
ุฏุฑุงู ูุซุงู ุจุฑุง ุณุงุฏฺฏ ฺฉุงุฑ ูุฑุงูุฏ  validation ุณูุช ุงูพูฺฉุดู ุตูุฑุช ฺฏุฑูุชู ุงุณุช .
ุชูุตู ูุง ุงู ุงุณุช ฺฉู ูุฑุงูุฏ validation  ุฑุง ุณูุช ุณุฑูุฑ ุฎูุฏ ุงูุฌุงู ุจุฏูุฏ ู ุงุทูุงุนุงุช ุณูุช ุจุงูฺฉ ุฑุง ุจู ุงูพูฺฉุดู ููุฑุณุชุฏ ฺฉู ุงููุช ุงูพูฺฉุดู ู ูพุฑุฏุงุฎุช ุดูุง ุฑุง ุฎู ุจุงูุง ุฎูุงูุฏ ุจุฑุฏ .
<br>
ุจุฑุง ุงู ฺฉุงุฑ ฺฉุงู ุงุณุช ุฏุฑ ุฒูุงู ุงุฌุงุฏ ููููู ุงุฒ PaymentSignRequest ุจุฑุง sign ฺฉุฑุฏู ูพุฑุฏุงุฎุช ุฏุฑ ููุฏ RedirectAddress ุขุฏุฑุณ ูุจ ุณุงุช ุฎูุฏ ุจุฑุง validation ุฑุง ูุงุฑุฏ ฺฉูุฏ  . ุฏุฑ ุงู ุตูุฑุช ุดุงูพุฑฺฉ ุงุทูุงุนุงุช validation ุฑุง ุจู ุขุฏุฑุณ ูุงุฑุฏ ุดุฏู ุฎูุงูุฏ ูุฑุณุชุงุฏ ู ุดูุง ู ุชูุงูุฏ ุจุง ุงุณุชูุงุฏู ุงุฒ 
api ุขู ุณุงุช ูพุฑุฏุงุฎุช ุฏุฑ ูุจ ุณุงุช ุฎูุฏ ุงุนุชุจุงุฑ ูพุฑุฏุงุฎุช ุฑุง ุจุฑุณ ฺฉูุฏ ู ุจุนุฏ ุจุฑุณ ุงุนุชุจุงุฑ ูพุฑุฏุงุฎุช ฺฉุงุฑุจุฑ ุฑุง ุจู ุขุฏุฑุณ ฺฉู ุฏุฑ ูุงู AndroidManifest.xml ูุงุฑุฏ ฺฉุฑุฏุฏ redirect ฺฉูุฏ .
<br>
ุฏุฑ ุตูุฑุช ุงุณุชูุงุฏู ุงุฒ ุฑูุด validation ุณูุช ุณุฑูุฑ ฺฉุงุฑุจุฑ (ูฺฉุฑ) ูู ุชูุงูุฏ ุงุฏุนุง ฺฉูุฏ ูพุฑุฏุงุฎุช ูููู  ุฏุงุดุชู (ฺูู ุฏุณุชุฑุณ ุจู validation ุณูุช ุณุฑูุฑ ุดูุง ุฑุง ูุฏุงุฑุฏ) ุฏุฑ ุญุงู ฺฉู ุฏุฑ ุฑูุด ูุนููู ฺฉุงุฑุจุฑ(ูฺฉุฑ) ููฺฉู ุงุณุช ุจุง ุงุฌุงุฏ ุชุบุฑุงุช ุฏุฑ ุงูพูฺฉุดู ุดูุง ุง ุจุง ุฑูุด ูุง ุฏฺฏุฑ ูููู ุดูุฏ ุงู ฺฉุงุฑ ุฑุง ุงูุฌุงู ุฏูุฏ .

### โ๏ธ ุชูุฌู ณ : 
( ุงุณุชูุงุฏู ุงุฒ ุฑูุด callback ุจุง Lambda functions )
<br>
ุฏุฑ ุตูุฑุช ฺฉู ุนูุงูู ุฏุงุดุชุฏ ู ุชูุงูุฏ ุจู ุฌุง ูพุงุฏู ุณุงุฒ ุงูุชุฑูุณ ูุง PaymentSignCallback ู PaymentValidationCallback ุงุฒ ุฑูุด Lambda functions ุงุณุชูุงุฏู ฺฉูุฏ .
<br>
ุฏุฑ ุงู ุฑูุด ฺฉุงู ุงุณุช ฺฉ ููููู ุงุฒ ฺฉูุงุณ AlsatIPG ุฑุง ุจุตูุฑุช ุฒุฑ ุจุณุงุฒุฏ ู ุจุง ฺฉูฺฉ ุงู ููููู ฺฉุงุฑ ูุง ูพุฑุฏุงุฎุช ุฑุง ุงูุฌุงู ุจุฏูุฏ :

</div>

```Kotlin
  private val alsatIPG = AlsatIPG.getInstance()
```

<div dir="rtl">

ููฺูู ุจุฑุง sign ฺฉุฑุฏู ูพุฑุฏุงุฎุช ุจู ุฑูุด ุฒุฑ ุนูู ฺฉูุฏ :

</div>

```Kotlin
val paymentSignRequest = PaymentSignRequest(
    Api = API,
    Amount = "10000",
    InvoiceNumber = "12345",
    RedirectAddress = "http://www.example.com/some_path"
)
alsatIPG.sign(paymentSignRequest) { paymentSignResult ->
    when {
        paymentSignResult.isSuccessful -> {
            log("payment Sign Success url = ${paymentSignResult.url}")
            val intent = Intent(Intent.ACTION_VIEW, Uri.parse(paymentSignResult.url))
            startActivity(intent)
        }
        paymentSignResult.isLoading -> {
            log("payment Sign Loading ...")
        }
        else -> {
            log("payment Sign error = ${paymentSignResult.errorMessage}")
        }
    }
}
```

<div dir="rtl">

ู ุจุฑุง validation ฺฉุฑุฏู ูพุฑุฏุงุฎุช ุจู ุฑูุด ุฒุฑ ุนูู ฺฉูุฏ :

</div>

```Kotlin
override fun onNewIntent(intent: Intent?) {
        super.onNewIntent(intent)
        intent?.data?.let { data ->
            log("intent and Uri is not null")
            alsatIPG.validation(API, data) { paymentValidationResult ->
                when {
                    paymentValidationResult.isSuccessful -> {
                        log("payment Validation Success data = ${paymentValidationResult.data}")
                        if (
                            (paymentValidationResult.data?.PSP?.IsSuccess == true) &&
                            (paymentValidationResult.data?.VERIFY?.IsSuccess == true)
                        ) {
                            log("money transferred")
                        } else {
                            log("money has not been transferred")
                        }
                    }
                    paymentValidationResult.isLoading -> {
                        log("payment Validation Loading ...")
                    }
                    else -> {
                        log("payment Validation error = ${paymentValidationResult.errorMessage}")
                    }
                }
            }
        } ?: log("intent or Uri is null")
    }
```

<div dir="rtl">

### โ๏ธ ุชูุฌู ด :

ุฑูุด ูุง ูพุงุฏู ุณุงุฒ ุงูุชุฑูุณ ู Lambda functions ูฺ ุชูุงูุช ุฏุฑ ฺฉุงุฑุง ูุฏุงุฑูุฏ ู ุจู ุดูุง ุจุณุชฺฏ ุฏุงุฑุฏ ฺฉู ุจุง ฺฉุฏุงู ุฑูุด ุฑุงุญุช ุชุฑ ูุณุชุฏ ุง ุงูฺฉู ุฏุฑ ููุฑุฏ ูุง ุจุฎุตูุต ฺฉุฏุงู ุฑูุด ูุชุฌู ุจูุชุฑ ุจุฑุง ุดูุง ุจุฏุณุช ู ุขูุฑุฏ .

ุณูุฑุณ ฺฉุฏ ฺฉุงูู ูุฑ ุฏู ุฑูุด ุฏุฑ ุงฺฉุชูุช ูุง ุฒุฑ ุขูุฑุฏู ุดุฏู ุงุณุช :
<br>
- <a href="https://github.com/AlsatPardakht/AlsatIPGAndroidKotlinExample/blob/master/app/src/main/java/com/alsatpardakht/alsatipgandroidkotlinexample/MainActivityFirstWay.kt">MainActivityFirstWay</a> <= ุฑูุด ูพุงุฏู ุณุงุฒ ุงูุชุฑูุณ ูุง

- <a href="https://github.com/AlsatPardakht/AlsatIPGAndroidKotlinExample/blob/master/app/src/main/java/com/alsatpardakht/alsatipgandroidkotlinexample/MainActivitySecondWay.kt">MainActivitySecondWay</a> <= ุฑูุด ุงุณุชูุงุฏู ุงุฒ Lambda functions

## โ๏ธ ุณุงุฎุชู ุดุฏู ุจุง ุงุณุชูุงุฏู ุงุฒ  <a name = "built_using"></a>

</div>


- [Kotlin](https://kotlinlang.org/) - programming language
- [AlsatIPGAndroid](https://ktor.io/) - payment client library

<div dir="rtl">

## โ๏ธ ููุณูุฏฺฏุงู <a name = "authors"></a>

- [@erfanmhat](https://github.com/erfanmhat) - ุชูุณุนู ุฏููุฏู ุงูุฏุฑูุฏ



ูุณุช [ุฏฺฏุฑ ุชูุณุนู ุฏููุฏฺฏุงู](https://github.com/AlsatPardakht/AlsatIPGAndroidKotlinExample/contributors)
ฺฉู ุฏุฑ ุงู ูพุฑูฺู ูุดุงุฑฺฉุช ฺฉุฑุฏู ุงูุฏ .
</div>